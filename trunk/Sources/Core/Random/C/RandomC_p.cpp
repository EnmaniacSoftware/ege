#include "Core/Random/Random.h"
#include "Core/Random/C/RandomC_p.h"
#include <time.h>

EGE_NAMESPACE

//--------------------------------------------------------------------------------------------------------------------------------------------------------------

EGE_DEFINE_NEW_OPERATORS(RandomPrivate)
EGE_DEFINE_DELETE_OPERATORS(RandomPrivate)

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
RandomPrivate::RandomPrivate(Random* base) : m_base(base)
{
  setSeed((u32) time(NULL));
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
RandomPrivate::~RandomPrivate()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Sets random seed. */
void RandomPrivate::setSeed(u32 seed)
{
  srand(seed);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Returns randomly generated integer. */
s32 RandomPrivate::rand()
{
  return ::rand();
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Returns randomly generated floating value from given interval. */
float32 RandomPrivate::rand(float32 min, float32 max)
{
  // generate value from [0-1]
  float32 value = static_cast<float32>(rand()) / RAND_MAX;

  // map it to [min, max]
  return min + value * (max - min);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
