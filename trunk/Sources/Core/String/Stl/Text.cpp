#include "Core/String/Stl/Text.h"
#include <sstream>
#include <algorithm>
#include <cctype>

EGE_NAMESPACE

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text::Text() : std::wstring()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text::Text(const Text& text) : std::wstring(text)
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text::Text(const char* string) : std::wstring()
{
  String temp = string;
  resize(temp.length());
  std::copy(temp.begin(), temp.end(), begin());
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text::Text(const String& string) : std::wstring(string.length(), L' ')
{
  std::copy(string.begin(), string.end(), begin());
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text::~Text()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Converts self to lower-case. */
Text& Text::toLower()
{
  std::transform(begin(), end(), begin(), std::tolower);
  return *this;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Converts self to upper-case. */
Text& Text::toUpper()
{
  std::transform(begin(), end(), begin(), std::toupper);
  return *this;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text& Text::operator=(const Text& string)
{
  (*(std::wstring*) this) = (*(std::wstring*) &string);

  return *this;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Text& Text::operator+=(const Text& string)
{
  (*(std::wstring*) this) += (*(std::wstring*) &string);

  return *this;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Creates formatted text. */
void Text::format(const char* text, ...)
{
  char buffer[256];

	va_list arg;
	va_start(arg, text);
	vsprintf(buffer, text, arg);
	va_end(arg);

  *this = buffer;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
/*! Create new object from formatted text. */
Text Text::Format(const char* text, ...)
{
  Text out;

  char buffer[256];

	va_list arg;
	va_start(arg, text);
	vsprintf(buffer, text, arg);
	va_end(arg);

  out = buffer;

  return out;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
