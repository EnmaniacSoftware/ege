#include "Core/Debug/Debug.h"
#include "Core/Debug/Logger.h"
#include "Core/Debug/Console.h"

EGE_NAMESPACE

//--------------------------------------------------------------------------------------------------------------------------------------------------------------

EGE_DEFINE_NEW_OPERATORS(Debug)
EGE_DEFINE_DELETE_OPERATORS(Debug)

//--------------------------------------------------------------------------------------------------------------------------------------------------------------

Logger* Debug::m_log = NULL;

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Debug::Debug(Application* app) : Object(app)
{
  m_console = ege_new Console(app);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
Debug::~Debug()
{
  EGE_DELETE(m_console);

  Debug::Deinit();
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void Debug::Deinit()
{
  if (Debug::m_log)
  {
    delete Debug::m_log;
    Debug::m_log = NULL;
  }
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void Debug::Log(const String& text)
{
  if (NULL == Debug::m_log)
  {
    Debug::m_log = ege_new Logger("engine.log", true);
  }

  if (Debug::m_log)
  {
    Debug::m_log->write(text);
  }
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------