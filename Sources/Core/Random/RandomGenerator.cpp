#include "Core/Random/RandomGenerator.h"
#include "EGEAssert.h"

#if EGE_RANDOM_STDC
  #include "Core/Random/StdC/RandomGeneratorStdC_p.h"
#endif // EGE_RANDOM_STDC

EGE_NAMESPACE_BEGIN

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
EGE_DEFINE_NEW_OPERATORS(RandomGenerator)
EGE_DEFINE_DELETE_OPERATORS(RandomGenerator)
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
RandomGenerator::RandomGenerator(u32 seed) 
: Object()
{
  m_p = ege_new RandomGeneratorPrivate();
  if (m_p && (0 < seed))
  {
    setSeed(seed);
  }
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
RandomGenerator::~RandomGenerator()
{
  EGE_DELETE(m_p);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
bool RandomGenerator::isValid() const
{
  return NULL != m_p;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
s32 RandomGenerator::operator() ()
{
  if (isValid())
  {
    return p_func()->rand();
  }

  return 0;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void RandomGenerator::setSeed(u32 seed)
{
  if (isValid())
  {
    p_func()->setSeed(seed);
  }
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
float32 RandomGenerator::operator() (float32 min, float32 max)
{
  if (isValid())
  {
    return p_func()->rand(min, max);
  }

  return 0.0f;
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------

EGE_NAMESPACE_END