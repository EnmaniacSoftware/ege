#include "TextStreamTestBase.h"

using namespace ::testing;

EGE_NAMESPACE

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
const std::string TextStreamTestBase::KWhiteSpaces = " \t\n\r\v\f";
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
TextStreamTestBase::TextStreamTestBase()
: TestBase()
, m_stream(&m_device)
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
TextStreamTestBase::~TextStreamTestBase()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void TextStreamTestBase::SetUp()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void TextStreamTestBase::TearDown()
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
void TextStreamTestBase::makeDataStreamNotGood()
{
  // NOTE: its a bit workaround as there is currently no way to access private data members to do it directly

  // set expectations
  EXPECT_CALL(m_device, write(_, _))
    .WillOnce(Return(-1));

  // make a failed write 
  m_stream << static_cast<u8>(0);

  // check if bad
  EXPECT_FALSE(m_stream.isGood());
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------

