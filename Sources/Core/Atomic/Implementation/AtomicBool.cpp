#include "Core/Atomic/Interface/AtomicBool.h"
#include "Core/Atomic/Interface/AtomicOperations.h"

EGE_NAMESPACE_BEGIN

//--------------------------------------------------------------------------------------------------------------------------------------------------------------
AtomicBool::AtomicBool(bool value) 
: m_value(value ? 1 : 0)
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
AtomicBool::AtomicBool(const AtomicBool& other)
: m_value(other.m_value)
{
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
bool AtomicBool::load()
{
//  return m_value != 0;
  return 0 != egeAtomicAdd(m_value, 0);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------
bool AtomicBool::store(bool value)
{
  return 0 != egeAtomicCompareAndSet(m_value, value ? 0 : 1, value ? 1 : 0);
}
//--------------------------------------------------------------------------------------------------------------------------------------------------------------

EGE_NAMESPACE_END